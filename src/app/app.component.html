<div class="page">
  <header>
    <mat-toolbar color="primary">
      <button mat-icon-button *ngIf="showSidenav" (click)="onSidenavToggleButtonClick()">
        <mat-icon>menu</mat-icon>
      </button>

      <span>{{ title }}</span>
      <span class="space-filler"></span>

      <div class="language-menu-container">
        <button mat-button [matMenuTriggerFor]="languages">
          {{ currentLanguage.name }}
          <mat-icon>arrow_drop_down</mat-icon>
        </button>
        <mat-menu #languages="matMenu">
          <button mat-menu-item *ngFor="let lang of availableLanguages" (click)="onLanguageButtonClick(lang)">
            {{ lang.name }}
          </button>
        </mat-menu>
      </div>

      <div *ngIf="principal" class="profile-info-container">
        <img *ngIf="principal.getProfilePictureUrl(); else identicon" [src]="principal.getProfilePictureUrl()"
             alt="avatar" class="avatar round right-margin-8"/>

        <ng-template #identicon>
          <svg [data-jdenticon-value]="principal.getEmail()" class="avatar right-margin-8"></svg>
        </ng-template>
        <button mat-button [matMenuTriggerFor]="profileActions">{{ principal.getName() }}</button>

        <mat-menu #profileActions="matMenu">
          <button mat-menu-item id="sign_out_menu_item" (click)="onSignOutButtonClick()">
            {{ 'sign_out' | translate }}
          </button>
        </mat-menu>
      </div>
    </mat-toolbar>
  </header>

  <mat-sidenav-container autosize>
    <mat-sidenav #sidenav
                 *ngIf="showSidenav"
                 [mode]="mobileQuery.matches ? 'over' : 'side'"
                 [opened]="!mobileQuery.matches">
      <app-sidenav-menu></app-sidenav-menu>
    </mat-sidenav>

    <mat-sidenav-content>
      <main fxLayout="row" class="zero">
        <div fxFlex="80" fxFlexOffset="10">
          <router-outlet></router-outlet>
        </div>

        <div fxFlex></div>
      </main>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
